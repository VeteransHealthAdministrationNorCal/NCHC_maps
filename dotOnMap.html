<!DOCTYPE html>
<html lang="en">
<head>
	<title>Mapping with D3</title>
    
    <script src="https://d3js.org/d3.v3.min.js"></script>
   
<body>
	<script>
  var width = 950;
    var height = 900;
    var svg = d3.select('body').append('svg')
    .attr({width:width,
            height:height})



d3.json("ca.json",function(err,data){
    // chnage projection.
    var projection = d3.geo.albersUsa()
                .translate([width / 0.7, height / 1])
                .scale([2*width]);
    var path = d3.geo.path()
    .projection(projection);


    svg.selectAll('path')
    .data(data.features)
    .enter()
    .append('path')
    .attr('d',path)
    .style({fill:'none',stroke:'black'})
var aa = [38.58,121.4944]
    svg.selectAll("circle")
		.data([aa]).enter()
		.append("circle")
		.attr("cx", function (d) { console.log((d)); return (d)[0]; })
		.attr("cy", function (d) { return (d)[1]; })
		.attr("r", "100px")
		.attr("fill", "red")
})

/*
var albersProjection = d3.geoAlbers()
    .scale( 50000 )
    .rotate( [122.80,0] )
    .center( [0, 39.50] )
    .translate( [width/5.0,height/5.0] );

var geoPath = d3.geoPath()
    .projection( albersProjection );    
// Create SVG
var svg = d3.select( "body" )
    .append( "svg" )
    .attr( "width", width )
    .attr( "height", height );

// Append empty placeholder g element to the SVG
// g will contain geometry elements
var g = svg.append( "g" );
g.selectAll( "path" )
    .data( ca.features )
    .enter()
    .append( "path" )
    .attr( "fill", "#FFF" )
    .attr( "stroke", "#133")
    .attr( "d", geoPath );
  aa = [ 37.58,122.4944];


  svg.selectAll("circle")
		.data([aa]).enter()
		.append("circle")
		.attr("cx", function (d) { console.log((d)); return (d)[0]; })
		.attr("cy", function (d) { return (d)[1]; })
		.attr("r", "100px")
		.attr("fill", "red")
      */  
	</script>	
</body>
</html>